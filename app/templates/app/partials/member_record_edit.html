{% extends 'app/template_base.html' %}

{% block title %}{{ page_title }}{% endblock %}

{% block contents %}

<div class="wrapper">
    <h1>{{ page_title }}</h1>

    <form id="form" action="{{ form_action }}" method="post">
        {% csrf_token %}

        <h5 class="mt-3 mb-3">{{ owner_label }}: {{ owner_name }}</h5>
        <div class="mb-3">日付: {{ work_date }}</div>

        <div class="work-fields">
            <div>勤務形態： {{ record_form.work_status }}</div>

            <div class="toggle-fields">
                <hr class="my-4">
                <div>出勤時間：{{ record_form.clock_in_time }}</div>
                <div class="mt-2">退勤時間：{{ record_form.clock_out_time }}</div>
            </div>

            <hr class="toggle-fields my-4">

            {% if with_transport %}
                {% include "app/partials/customer_session_transport_block.html" with session_forms=session_forms morning_transport_form=morning_transport_form return_transport_form=return_transport_form label="勤務セッション" %}
            {% else %}
                {% include "app/partials/session_block.html" with forms=session_forms label="勤務セッション" %}
            {% endif %}

            <hr class="my-4">
            <div>
                <div>備考：</div>
                {{ record_form.remarks }}
            </div>

            <hr class="my-4">
        </div>

        <button class="btn-sm" type="submit" name="action" value="save">保存</button>
        <button class="btn-sm" type="submit" name="action" value="cancel" formnovalidate>
            キャンセル
        </button>
    </form>
</div>

{% if with_transport %}
<script>
    const TRANSFER_VALUE = "{{ transfer_value }}";
    setupTransportControl();
</script>
{% endif %}

<script>
    setupToggleWorkStatusControl();
    setupFormValidation();
</script>

{% endblock %}
